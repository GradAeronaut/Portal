# Быстрый старт: Диагностика деплоя (Read-Only)

**Цель:** Определить источник деплоя и причину отсутствия gate кода БЕЗ изменений

---

## Команды для выполнения на сервере

```bash
# 1. Подключиться к серверу
ssh root@159.198.74.241

# 2. Скопировать скрипт диагностики (с локальной машины)
# scp diagnose_deployment_readonly.sh root@159.198.74.241:/tmp/

# 3. Выполнить диагностику
bash /tmp/diagnose_deployment_readonly.sh

# 4. Сохранить результат в файл (опционально)
bash /tmp/diagnose_deployment_readonly.sh > /tmp/diagnosis_output.txt 2>&1
cat /tmp/diagnosis_output.txt

# 5. Скопировать результат на локальную машину для анализа
# scp root@159.198.74.241:/tmp/diagnosis_output.txt ./
```

---

## Что нужно зафиксировать

После выполнения скрипта ответить на вопросы:

### 1. Источник истины (что реально деплоится)
- Какой remote используется? (`origin` / `server` / другой)
- Какая ветка активна?
- Откуда берётся код на сервере?

### 2. Почему сервер остаётся на f42182b
- HEAD совпадает с f42182b? (ДА/НЕТ)
- Есть ли auto-pull/webhook, который откатывает код?
- Код не синхронизирован с remote?

### 3. Подтверждение, что код с gate не попадает на сервер
- Файл содержит gate код? (ДА/НЕТ)
- HEAD находится на коммите с gate кодом? (ДА/НЕТ)
- Коммиты с gate кодом есть в remote, но не на сервере? (ДА/НЕТ)

---

## Заполнить отчёт

После диагностики заполнить `DEPLOYMENT_DIAGNOSIS_REPORT.md` с результатами проверки.

---

**ВАЖНО:** Скрипт диагностики НЕ делает никаких изменений на сервере!



